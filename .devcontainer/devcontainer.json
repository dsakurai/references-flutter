{
    "name": "Dev Container",
    // Use Compose so we can run MariaDB alongside the dev container
    "dockerComposeFile": [
        "compose.yaml"
    ],
    "service": "dev",
    // Ensure DB starts with the dev container
    "runServices": ["db"],
    // Mount workspace at a predictable path
    "workspaceFolder": "/workspace",
    // Ensure host workspace is mounted at /workspace
    // "workspaceMount": "source=${localWorkspaceFolder},target=/workspace,type=bind",
    "initializeCommand": "bash -lc 'echo WORKSPACE=${localWorkspaceFolder} > .devcontainer/.env'",

    "remoteUser": "vscode",
    "containerEnv": {
        "HOME": "/home/vscode"
    },

    "features": {
        "git": "os-provided", // Enable VSCode functionality to re-use git credentials: https://stackoverflow.com/a/73327749
        "sshd": "latest"      // "Add a SSH server into a container so that you can use an external terminal, sftp, or SSHFS to interact with it." https://github.com/microsoft/vscode-dev-containers/blob/main/script-library/docs/sshd.md
    },

    "customizations": {
        "vscode": {
            "extensions": [
                "docsmsft.docs-yaml",
                "Dart-Code.flutter"
            ]
        }
    }
}
